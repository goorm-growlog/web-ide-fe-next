# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json

# CodeRabbit Configuration for web-ide-fe-next
# AI-powered code review configuration

# ì–¸ì–´ ì„¤ì • (í•œêµ­ì–´ë¡œ ë¦¬ë·°)
language: "ko-KR"

# ë² íƒ€ ê¸°ëŠ¥ í™œì„±í™”
early_access: true

# ë¬´ë£Œ í‹°ì–´ ê¸°ëŠ¥ í™œì„±í™”
enable_free_tier: true

# ì „ì—­ í†¤ ë° ì „ë¬¸ì„± ì„¤ì •
tone_instructions: |
  Expert frontend code reviewer specializing in Next.js, React, TypeScript, and modern web development.
  Focus on FSD (Feature-Sliced Design) architecture, accessibility, performance, and maintainability.

# ë¦¬ë·° ì„¤ì • ì„¹ì…˜
reviews:
  # ë¦¬ë·° í”„ë¡œí•„ ì„¤ì • (chill, assertive)
  profile: "chill"
  
  # ë³€ê²½ ìš”ì²­ ì›Œí¬í”Œë¡œìš° ë¹„í™œì„±í™” (PRì—ì„œ ì§ì ‘ ë³€ê²½ ìš”ì²­í•˜ì§€ ì•ŠìŒ)
  request_changes_workflow: false
  
  # ê³ ìˆ˜ì¤€ ìš”ì•½ ì œê³µ (ì „ì²´ì ì¸ ì½”ë“œ í’ˆì§ˆ ê°œìš”)
  high_level_summary: true
  
  # ê³ ìˆ˜ì¤€ ìš”ì•½ í”Œë ˆì´ìŠ¤í™€ë”
  high_level_summary_placeholder: "## ğŸ“‹ ì „ì²´ ë¦¬ë·° ìš”ì•½\n\n"
  
  # ì›Œí¬ìŠ¤ë£¨ì— ê³ ìˆ˜ì¤€ ìš”ì•½ í¬í•¨ ì—¬ë¶€
  high_level_summary_in_walkthrough: false
  
  # ë¦¬ë·° ìƒíƒœ í‘œì‹œ (ë¦¬ë·° ì§„í–‰ ìƒí™©ì„ ëª…í™•í•˜ê²Œ í‘œì‹œ)
  review_status: true
  
  # ì»¤ë°‹ ìƒíƒœ ì„¤ì • (ë¦¬ë·° ì§„í–‰ ì‹œ ì»¤ë°‹ ìƒíƒœ ì„¤ì •)
  commit_status: true
  
  # ë¦¬ë·° ì‹¤íŒ¨ ì‹œ ì»¤ë°‹ ìƒíƒœ ì„¤ì •
  fail_commit_status: false
  
  # ì›Œí¬ìŠ¤ë£¨ ì ‘ê¸° (ê¸´ ì„¤ëª…ì„ ì ‘ì„ ìˆ˜ ìˆê²Œ í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ)
  collapse_walkthrough: false

  # ë„êµ¬ ì„¤ì • (ë¦°í„° ë° íƒ€ì…ì²´ì»¤ í†µí•©)
  tools:
    # Biome ë¦°í„° í†µí•© (ìë™ ì„¤ì • íŒŒì¼ ì¸ì‹)
    biome:
      enabled: true

  # ì‹œ í˜•ì‹ì˜ ë¦¬ë·° ë¹„í™œì„±í™” (ë” ì‹¤ìš©ì ì¸ ë¦¬ë·°)
  poem: false
  
  # ë³€ê²½ëœ íŒŒì¼ ìš”ì•½ ìƒì„±
  changed_files_summary: true
  
  # ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ìƒì„±
  sequence_diagrams: true
  
  # ì½”ë“œ ë¦¬ë·° ë…¸ë ¥ ì¶”ì •
  estimate_code_review_effort: true
  
  # ì—°ê²°ëœ ì´ìŠˆ í‰ê°€
  assess_linked_issues: true
  
  # ê´€ë ¨ ì´ìŠˆ í¬í•¨
  related_issues: true
  
  # ê´€ë ¨ PR í¬í•¨
  related_prs: true
  
  # ë¼ë²¨ ì œì•ˆ
  suggested_labels: true
  
  # ìë™ ë¼ë²¨ ì ìš© (ë¹„í™œì„±í™”)
  auto_apply_labels: false
  
  # ë¦¬ë·°ì–´ ì œì•ˆ
  suggested_reviewers: true
  
  # ìë™ ë¦¬ë·°ì–´ í• ë‹¹ (ë¹„í™œì„±í™”)
  auto_assign_reviewers: false

  # ìë™ ë¦¬ë·° ì„¤ì •
  auto_review:
    # ìë™ ë¦¬ë·° í™œì„±í™” (PR ìƒì„± ì‹œ ìë™ìœ¼ë¡œ AI ë¦¬ë·° ì‹œì‘)
    enabled: true
    
    # Draft PR ë¦¬ë·° ì—¬ë¶€ (false: ì™„ì„±ëœ PRë§Œ ë¦¬ë·°)
    drafts: false
    
    # ìë™ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•  ë¸Œëœì¹˜ë“¤ (ì´ ë¸Œëœì¹˜ë“¤ë¡œì˜ PRë§Œ ë¦¬ë·°)
    base_branches:
      - main
      - develop
    
    # ì¦ë¶„ ë¦¬ë·° í™œì„±í™” (ìƒˆë¡œìš´ ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°í•˜ì—¬ íš¨ìœ¨ì„± í–¥ìƒ)
    auto_incremental_review: true
    
    # ì œëª© í‚¤ì›Œë“œë¡œ ë¦¬ë·° ë¬´ì‹œ (íŠ¹ì • í‚¤ì›Œë“œê°€ í¬í•¨ëœ PRì€ ë¦¬ë·°í•˜ì§€ ì•ŠìŒ)
    ignore_title_keywords:
      - "wip"           # ì‘ì—… ì¤‘ì¸ PR
      - "draft"         # ì´ˆì•ˆ PR
      - "do not review" # ë¦¬ë·° ê¸ˆì§€ PR
      - "temp"          # ì„ì‹œ PR
      - "docs"         # ë¬¸ì„œ ë³€ê²½
      - "typo"         # ì˜¤íƒ€ ìˆ˜ì •
      - "minor"        # ì‚¬ì†Œí•œ ë³€ê²½
    
    # ìë™í™” ë´‡ ì‚¬ìš©ìëª… ë¬´ì‹œ (Dependabot, Renovate ë“±)
    ignore_usernames:
      - "dependabot[bot]"
      - "renovate[bot]"
    
    # PR ë‹«í ë•Œ ë¦¬ë·° ì¤‘ë‹¨
    abort_on_close: true

  # ê²½ë¡œë³„ ë§ì¶¤ ì§€ì¹¨ (FSD ì•„í‚¤í…ì²˜ ë° êµ¬ì²´ì ì¸ íŒŒì¼ íƒ€ì…ë³„ ë¦¬ë·° ê·œì¹™)
  path_instructions:
    # FSD ì•„í‚¤í…ì²˜ ë ˆì´ì–´ë“¤
    - path: "src/entities/**"
      instructions: |
        Business entities layer review guidelines:
        - Ensure pure business logic without UI components
        - Verify only shared layer imports (no other layers)
        - Check reusability and domain isolation
        - Validate business model purity

    - path: "src/features/**"
      instructions: |
        Business features layer review guidelines:
        - Focus on single business functionality
        - Import only entities and shared layers
        - Avoid importing other features
        - Separate business logic from UI logic
        - Check feature independence

    - path: "src/widgets/**"
      instructions: |
        Composite components layer review guidelines:
        - Import only entities, shared, and features layers
        - Avoid importing other widgets
        - Ensure reusable composite UI blocks
        - Check component composition patterns

    - path: "src/shared/**"
      instructions: |
        Shared utilities layer review guidelines:
        - Import no other layers (pure utilities)
        - Ensure reusability across all layers
        - Check for circular dependencies
        - Validate utility function purity

    # UI ì»´í¬ë„ŒíŠ¸ (ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ìš”ì†Œë“¤)
    - path: "src/shared/ui/**"
      instructions: |
        UI Components review guidelines:
        - Ensure compliance with shadcn/ui and Radix UI patterns
        - Verify accessibility (a11y) guidelines compliance
        - Review TypeScript type definition completeness
        - Check props interface clarity and documentation
        - Validate semantic HTML usage and ARIA attributes
        - Ensure keyboard navigation support
        - Check color contrast ratios and screen reader compatibility

    # React ì»´í¬ë„ŒíŠ¸ ì„±ëŠ¥ ìµœì í™” (TSX íŒŒì¼)
    - path: "src/**/*.tsx"
      instructions: |
        React Components performance review guidelines:
        - Check for unnecessary re-renders and optimization opportunities
        - Verify proper use of React.memo, useMemo, useCallback
        - Review bundle size impact of imports (prefer dynamic imports for large components)
        - Ensure proper image optimization and lazy loading implementation
        - Check for proper error boundaries usage
        - Verify efficient state management patterns
        - Review prop drilling and consider context usage

    # Next.js ì•± ë¼ìš°í„° í˜ì´ì§€ (App Router)
    - path: "src/app/**"
      instructions: |
        Next.js App Router pages review guidelines:
        - Verify proper Server vs Client Component distinction
        - Check metadata API implementation for SEO optimization
        - Review loading.tsx, error.tsx, not-found.tsx implementations
        - Ensure proper data fetching patterns (fetch, cache, revalidate)
        - Check for proper streaming and Suspense usage
        - Verify environment variable security (no client-side exposure)
        - Review route groups and parallel routes usage

    # í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ (ì½”ë“œ í’ˆì§ˆê³¼ ì•ˆì •ì„± ë³´ì¥)
    - path: "**/*.{test,spec}.*"
      instructions: |
        Test files review guidelines:
        - Verify test coverage adequacy
        - Ensure test case clarity and comprehensiveness
        - Review mock data usage appropriateness
        - Check test descriptions and naming conventions

    # Storybook ìŠ¤í† ë¦¬ íŒŒì¼ (UI ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸)
    - path: "src/**/*.stories.tsx"
      instructions: |
        Storybook stories review guidelines:
        - Verify component props type definitions
        - Ensure various state and variant cases are covered
        - Check accessibility test cases inclusion
        - Review story naming and organization

    # ì„¤ì • íŒŒì¼ë“¤ (í”„ë¡œì íŠ¸ ì„¤ì • ë° í™˜ê²½ êµ¬ì„±)
    - path: "*.config.*"
      instructions: |
        Configuration files review guidelines:
        - Verify configuration correctness and completeness
        - Check environment-specific settings appropriateness
        - Review security-related configuration safety
        - Ensure no unnecessary or redundant settings

    # íƒ€ì… ì •ì˜ íŒŒì¼ë“¤ (TypeScript íƒ€ì… ì‹œìŠ¤í…œ)
    - path: "**/*.{d,types,interface}.ts"
      instructions: |
        Type definition files review guidelines:
        - Ensure type clarity and precision
        - Verify appropriate use of generic types
        - Check union and intersection types appropriateness
        - Review type guards usage where necessary

    # ë³´ì•ˆ ê²€ì¦ ê·œì¹™ (ëª¨ë“  TypeScript/JavaScript íŒŒì¼)
    - path: "**/*.{ts,tsx,js,jsx}"
      instructions: |
        Security review guidelines:
        - Check for potential XSS vulnerabilities in JSX
        - Verify input sanitization and validation
        - Review environment variable exposure (no client-side secrets)
        - Validate authentication and authorization patterns
        - Check for SQL injection vulnerabilities in database queries
        - Ensure proper CSRF protection implementation
        - Review cookie security settings (httpOnly, secure, sameSite)

    # CSS/SCSS ìŠ¤íƒ€ì¼ íŒŒì¼ (ìŠ¤íƒ€ì¼ë§ ë° ì„±ëŠ¥)
    - path: "**/*.{css,scss,module.css,module.scss}"
      instructions: |
        CSS/SCSS review guidelines:
        - Optimize Tailwind CSS class usage and avoid redundancy
        - Check for CSS-in-JS performance patterns
        - Verify responsive design implementation
        - Review accessibility in styling (color contrast, focus indicators)
        - Ensure CSS custom properties usage for maintainability
        - Check for unused styles and dead CSS
        - Validate CSS Grid and Flexbox usage efficiency

    # Custom Hooks íŒ¨í„´ (React Hook ìµœì í™”)
    - path: "**/use*.{ts,tsx}"
      instructions: |
        Custom Hooks review guidelines:
        - Verify proper React Hook rules compliance
        - Check for efficient dependency arrays in useEffect/useMemo/useCallback
        - Ensure proper cleanup in useEffect for subscriptions
        - Review hook reusability and single responsibility
        - Validate proper state management patterns
        - Check for unnecessary re-renders and optimization opportunities
        - Ensure proper error handling within hooks

    # í™˜ê²½ ì„¤ì • ë° ë³´ì•ˆ ê´€ë ¨ íŒŒì¼
    - path: "**/.env*"
      instructions: |
        Environment and security configuration review guidelines:
        - Verify no sensitive data in environment files
        - Check Next.js security headers configuration
        - Review middleware security implementations
        - Validate CORS settings appropriateness
        - Ensure proper secret management patterns
        - Check for production vs development environment distinctions

    - path: "**/next.config.*"
      instructions: |
        Environment and security configuration review guidelines:
        - Verify no sensitive data in environment files
        - Check Next.js security headers configuration
        - Review middleware security implementations
        - Validate CORS settings appropriateness
        - Ensure proper secret management patterns
        - Check for production vs development environment distinctions

    - path: "**/middleware.{ts,js}"
      instructions: |
        Environment and security configuration review guidelines:
        - Verify no sensitive data in environment files
        - Check Next.js security headers configuration
        - Review middleware security implementations
        - Validate CORS settings appropriateness
        - Ensure proper secret management patterns
        - Check for production vs development environment distinctions

# ì±„íŒ… ì„¤ì • ì„¹ì…˜
chat:
  # ìë™ ì‘ë‹µ í™œì„±í™” (ë¦¬ë·° ê´€ë ¨ ì§ˆë¬¸ì— ìë™ìœ¼ë¡œ ë‹µë³€)
  auto_reply: true

# ì§€ì‹ ë² ì´ìŠ¤ ì„¤ì • ì„¹ì…˜
knowledge_base:
  # í•™ìŠµ ë²”ìœ„ ì„¤ì • (ë¡œì»¬ ì €ì¥ì†Œ í•™ìŠµ)
  learnings:
    scope: "local"
  
  # ì´ìŠˆ ë²”ìœ„ ì„¤ì • (ë¡œì»¬ ì €ì¥ì†Œ ì´ìŠˆ)
  issues:
    scope: "local"
  
  # PR ë²”ìœ„ ì„¤ì • (ë¡œì»¬ ì €ì¥ì†Œ PR)
  pull_requests:
    scope: "local"
  
  # ì½”ë“œ ê°€ì´ë“œë¼ì¸ íŒŒì¼ ì°¸ì¡°
  code_guidelines:
    filePatterns:
      - ".cursor/rules/frontend-guide.mdc"